<!-- Modern Templates Management -->
<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-5">
    <div>
      <h1 class="h2 fw-bold text-slate-800 mb-1">Documents & Templates</h1>
      <p class="text-muted mb-0">Manage legal document templates and generate documents</p>
    </div>
    <div class="btn-group">
      <button class="btn btn-primary-modern" data-bs-toggle="modal" data-bs-target="#uploadModal">
        <i class="bi bi-cloud-upload me-2"></i>Upload Document
      </button>
      <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#generateModal">
        <i class="bi bi-file-earmark-plus me-2"></i>Generate from Model
      </button>
    </div>
  </div>

  <!-- Templates Table -->
  <div class="card card-modern">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-modern mb-0">
          <thead>
            <tr>
              <th>Template ID</th>
              <th>Title</th>
              <th>Version</th>
              <th>Created By</th>
              <th>Last Updated</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let template of templates" class="align-middle">
              <td>
                <span class="fw-semibold text-primary">{{ template.id }}</span>
              </td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="bg-warning bg-opacity-10 rounded-3 p-2 me-3">
                    <i class="bi bi-file-earmark-text text-warning"></i>
                  </div>
                  <div>
                    <div class="fw-semibold">{{ template.title }}</div>
                  </div>
                </div>
              </td>
              <td>
                <span class="badge badge-modern text-bg-info">v{{ template.version }}</span>
              </td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="bg-success bg-opacity-10 rounded-circle p-2 me-2">
                    <i class="bi bi-person-fill text-success"></i>
                  </div>
                  <span>{{ template.createdBy }}</span>
                </div>
              </td>
              <td>
                <span class="text-muted">{{ template.updatedAt | date:'MMM d, y' }}</span>
              </td>
              <td class="text-end">
                <div class="btn-group" role="group">
                  <button class="btn btn-sm btn-outline-primary" 
                          title="Preview" 
                          data-bs-toggle="modal" 
                          data-bs-target="#previewModal"
                          (click)="previewTemplate(template)">
                    <i class="bi bi-eye"></i>
                  </button>
                  <button class="btn btn-sm btn-outline-secondary" title="Edit">
                    <i class="bi bi-pencil"></i>
                  </button>
                  <button class="btn btn-sm btn-outline-success" title="Generate Document">
                    <i class="bi bi-file-earmark-plus"></i>
                  </button>
                  <button class="btn btn-sm btn-outline-danger" title="Delete">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Upload Document Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Upload Document Template</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label class="form-label">Template Title *</label>
            <input type="text" class="form-control" [(ngModel)]="uploadForm.title" name="title" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Document File *</label>
            <input type="file" class="form-control" accept=".pdf,.doc,.docx" (change)="onFileSelected($event)">
            <div class="form-text">Supported formats: PDF, DOC, DOCX</div>
          </div>
          <div class="mb-3">
            <label class="form-label">Version</label>
            <input type="text" class="form-control" [(ngModel)]="uploadForm.version" name="version" placeholder="1.0">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="uploadTemplate()">
          Upload Template
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Generate from Model Modal -->
<div class="modal fade" id="generateModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Generate from Model</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label class="form-label">Select Base Model *</label>
            <select class="form-select" [(ngModel)]="generateForm.baseModel" name="baseModel" required>
              <option value="">Choose a model...</option>
              <option value="contract">Standard Contract</option>
              <option value="power-of-attorney">Power of Attorney</option>
              <option value="company-statutes">Company Statutes</option>
              <option value="lease-agreement">Lease Agreement</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">New Template Title *</label>
            <input type="text" class="form-control" [(ngModel)]="generateForm.title" name="title" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" rows="3" [(ngModel)]="generateForm.description" name="description"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" (click)="generateTemplate()">
          Generate Template
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Preview Modal -->
<div class="modal fade" id="previewModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Template Preview: {{ selectedTemplate?.title }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="text-center p-5 bg-light rounded">
          <i class="bi bi-file-earmark-text display-1 text-muted mb-3"></i>
          <p class="text-muted">Document preview would appear here</p>
          <small class="text-muted">Version {{ selectedTemplate?.version }} â€¢ Updated {{ selectedTemplate?.updatedAt | date:'MMM d, y' }}</small>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Download Template</button>
      </div>
    </div>
  </div>
</div>
